---
title: SpringBoot配置：Banner配置
date: 2023-02-26 14:24:42
permalink: /pages/3d8091/
categories:
  - 后端
  - SpringBoot
tags:
  - 
author: 
  name: MYH
  link: https://github.com/mengyahui
---
在 SpringBoot 项目启动后会在控制台打印一个默认的启动图案，称之为 Banner。默认 Banner 的效果如下：

```jinja2
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::               (v2.6.10)
```

这个 Banner 是 SpringBoot 自带的，如果觉得不好看，是可以更改的。

## 一、Banner 在那里加载

既然要更换 SpringBoot 项目的默认 Banner，首先应该知道 Banner 是如何出现的，这样才能更好的修改这个 Banner。

其实，在 SpringBoot 项目中打印 Banner 的类是 `SpringApplicationBannerPrinter` 在项目启动时会按照如下顺序找到并打印 Banner。

1. 首先，项目的 classpath 下的 banner.gif、banner.jpg、banner.png 会被优先使用。
2. 若上面的未找到，则继续在 classpath 下找 banner.txt。
3. 若以上都未找到，则默认使用 SpringBoot 默认的 SpringBootBanner。

一般情况下都是使用 banner.txt 来替换 SpringBoot 的默认 Banner。此外，图片在打印时会被转化为 ASCLL 字符画。

## 二、设置图片 Banner

使用图片来定义 Banner 是不会原样打印的，而是会被转换成相应的 ASCII 字符画。下面来看效果。

首先，准备一张图片，重命名为 banner.png，放到项目的 resource 路径下：

![banner](assets/banner-16739548737831.png)

启动项目查看效果，如下：

```jinja2
               :                                                              
               8#                                                             
               88                                          #*          8      
               88                                  8       :8.         88     
              :88                                  88      88.       8888     
              :88       8*                         88  8#8&88       8888      
      #   #888888888#.  888                         88888888#      8888       
      8#      888*      888                         :8  88 .     o888    88:  
      88      888       888                        888888888888 #8#.   .888   
      88:  :88888888888 888                  .888888#8 &8:88.         8888.   
      888     888.      88#                        #8#     8*       8888      
      888     888      :88                          8#88888*      #8#      88 
       88  8888888888#*  #                           &888888    88       888& 
       &      888                                 :8  o8&  88          8888#  
              88#                                 88  o8&    ##     *8888#    
              #8                                  8#  o88         88888*      
               8                                 :8   o8       88#:           
              .8                 *#               *                           
               8888888888888888#                                              
                 #8#8o                                                        
```

通常在 banner.txt 中指定 ASCII 字符画即可，ASCII 字符可用网站生成，推荐：https://www.bootschool.net/ascii，下图是在网上找的 ASCII 字符画。

```jinja2
////////////////////////////////////////////////////////////////////
//                          _ooOoo_                               //
//                         o8888888o                              //
//                         88" . "88                              //
//                         (| ^_^ |)                              //
//                         O\  =  /O                              //
//                      ____/`---'\____                           //
//                    .'  \\|     |//  `.                         //
//                   /  \\|||  :  |||//  \                        //
//                  /  _||||| -:- |||||-  \                       //
//                  |   | \\\  -  /// |   |                       //
//                  | \_|  ''\---/''  |   |                       //
//                  \  .-\__  `-`  ___/-. /                       //
//                ___`. .'  /--.--\  `. . ___                     //
//              ."" '<  `.___\_<|>_/___.'  >'"".                  //
//            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //
//            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //
//      ========`-.____`-.___\_____/___.-`____.-'========         //
//                           `=---='                              //
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //
//            佛祖保佑       永不宕机     永无BUG                    //
////////////////////////////////////////////////////////////////////
```

> 若 resource 目录下同时存在 banner 的图片和 banner 的 ASCII 文本，则二者都会打印。

## 三、控制 Banner 样式

自定义 Banner 若不做任何配置，看起来比较臃肿，如可以在 application.yml 配置文件中进行自定义配置，下面是对图片 Banner 的自定义配置。

```yaml
spring:
  banner:
    charset: UTF-8
    image:
      location: classpath:banner.png
      margin: 1
      height: 15
      invert: false # 颜色反转
  main:
    banner-mode: console # console在控制台打印；log在文件中打印；off关闭
```

配置后的 Banner 如下，是不是顺眼多了

```jinja2
              8                                                              
              88                                                             
              88                                  :   o8##:8.         88     
             :88                                  88      #8.       8888     
            #88888888# 88                         .8o   . 88      &888       
     8&      o88*      888                         ## :8# #      888:   88o  
     88      #88       888                       *8888888888#  8#     #888   
     88#  8888888#o    888                   .    8.#8888888        8888     
     888     888       88                          8# 8#.o#      :88      88 
      88 888888#88#&   .#                         & .o88888    8       o888  
             888                                 88  o8&  *8&        88888   
             #8                                  8#  o8&          88888      
              8                                 &8   o8       88*            
              888888888#######88#                                            
               o88888#8*   
```

此外，SpringBoot 还支持在 banner.txt 中添加一些属性，就像下面这样

```jinja2
${AnsiColor.BRIGHT_GREEN}
Spring Boot Version:${spring-boot.version}${spring-boot.formatted-version}
////////////////////////////////////////////////////////////////////
//                          _ooOoo_                               //
//                         o8888888o                              //
//                         88" . "88                              //
//                         (| ^_^ |)                              //
//                         O\  =  /O                              //
//                      ____/`---'\____                           //
//                    .'  \\|     |//  `.                         //
//                   /  \\|||  :  |||//  \                        //
//                  /  _||||| -:- |||||-  \                       //
//                  |   | \\\  -  /// |   |                       //
//                  | \_|  ''\---/''  |   |                       //
//                  \  .-\__  `-`  ___/-. /                       //
//                ___`. .'  /--.--\  `. . ___                     //
//              ."" '<  `.___\_<|>_/___.'  >'"".                  //
//            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //
//            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //
//      ========`-.____`-.___\_____/___.-`____.-'========         //
//                           `=---='                              //
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //
//            佛祖保佑       永不宕机     永无BUG                    //
////////////////////////////////////////////////////////////////////
```

- `${AnsiColor.BRIGHT_GREEN}`：设置控制台中输出内容的颜色。
- `${spring-boot.version}`：Spring Boot 的版本号

- `${spring-boot.formatted-version}`：格式化后的 `{spring-boot.version}` 版本信息

效果就不再展示了。
