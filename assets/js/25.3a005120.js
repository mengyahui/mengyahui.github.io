(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{340:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一、作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、作用"}},[s._v("#")]),s._v(" 一、作用")]),s._v(" "),t("p",[s._v("SpringBoot 虽然可以做到开箱即用，但提供的配置都是默认的，就比如内嵌的 Tomcat 服务器默认的端口是 8080；此外，数据库的链接信息也需要在配置文件中配置。")]),s._v(" "),t("p",[s._v("在使用 Spring Initializr 构建完 SpringBoot 项目后，会在 resources 目录下生成一个默认的全局配置文件 application.properties，这是一个空文件，因为Spring Boot在底层已经把配置都给我们自动配置好了，当在配置文件进行配置时，会修改SpringBoot自动配置的默认值。")]),s._v(" "),t("h2",{attrs:{id:"二、格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、格式"}},[s._v("#")]),s._v(" 二、格式")]),s._v(" "),t("p",[s._v("SpringBoot 配置文件主要有两种格式： properties 和 yml，这两种配置文件的功能都是一样的，下面就以配置项目端口为例来掩饰两种配置文件的区别。")]),s._v(" "),t("p",[t("strong",[s._v("properties")])]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server.port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("8888")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("yml")])]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("这样写是不是感觉 properties 配置文件的写法更简洁；恰恰相反，配置往往是成组出现的，使用 properties 的写法会造成大量的重复编码；使用 yml 格式的配置文件就不会出现这一问题，且条理更加清晰。")]),s._v(" "),t("h2",{attrs:{id:"三、优先级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、优先级"}},[s._v("#")]),s._v(" 三、优先级")]),s._v(" "),t("p",[s._v("理论上讲 SpringBoot 可以同时存在这两种格式的配置文件，但如果 properties 与 yml 配置文件中出现了相同的配置，那么会以 properties 配置文件中的配置为主；在实际业务中，通常只会采取一种统一的配置文件格式，这样可以更好的维护项目；")]),s._v(" "),t("p",[s._v("SpringBoot 项目在启动时，不仅仅加载 resources 目录下的配置文件，以下位置的配置也会被加载。")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("路径")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("扫描优先级")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("./config")]),s._v(" "),t("td",[s._v("项目根目录下的config目录")]),s._v(" "),t("td",[s._v("1")])]),s._v(" "),t("tr",[t("td",[s._v("./")]),s._v(" "),t("td",[s._v("项目根目录")]),s._v(" "),t("td",[s._v("2")])]),s._v(" "),t("tr",[t("td",[s._v("classpath:/config")]),s._v(" "),t("td",[s._v("编译目录下的config目录")]),s._v(" "),t("td",[s._v("3")])]),s._v(" "),t("tr",[t("td",[s._v("classpath:/")]),s._v(" "),t("td",[s._v("编译目录的根目录")]),s._v(" "),t("td",[s._v("4")])])])]),s._v(" "),t("h2",{attrs:{id:"四、加载外部配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、加载外部配置文件"}},[s._v("#")]),s._v(" 四、加载外部配置文件")]),s._v(" "),t("p",[s._v("有的时候，配置信息是我们无法在开发时就能确定的，比如数据库配置，加密密钥配置等。这时候就需要把配置文件放到外边，让用户自定义配置部署。")]),s._v(" "),t("p",[s._v("只需要将配置文件放到 SpringBoot 打包的 jar 同级目录下或 config 目录下，程序启动时就会自动读取该配置文件")]),s._v(" "),t("h2",{attrs:{id:"五、多环境切换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、多环境切换"}},[s._v("#")]),s._v(" 五、多环境切换")]),s._v(" "),t("p",[s._v("在项目开发时，通常分为 "),t("strong",[s._v("开发")]),s._v("、"),t("strong",[s._v("测试")]),s._v("、"),t("strong",[s._v("预发布")]),s._v("、**线上 **四个环境。比如说针对数据库连接，每个环境的数据库连接也都是不一样的。")]),s._v(" "),t("p",[s._v("通常将这些不同环境的配置信息都配置在一个配置文件中，然后通过一个很简单的操作，实现这几个环境之间的切换，从而简化开发过程。")]),s._v(" "),t("p",[s._v("SpringBoot 提供了 profile 多环境支持。profile 可以满足 Spring 对不同的环境提供不同配置的功能，通过激活、指定参数等方式来快速切换环境。")]),s._v(" "),t("p",[t("strong",[s._v("properties 配置")])]),s._v(" "),t("p",[s._v("我们在主配置文件编写时，文件名可以是 "),t("code",[s._v("application-{profile}.properties")]),s._v("，全局配置默认使用 "),t("code",[s._v("application.properties")]),s._v("的配置；")]),s._v(" "),t("p",[s._v("下面有三个环境的配置文件：")]),s._v(" "),t("p",[t("code",[s._v("application-dev.properties")]),s._v("：开发环境配置文件")]),s._v(" "),t("p",[t("code",[s._v("application-pro.properties")]),s._v("：生产环境配置文件")]),s._v(" "),t("p",[t("code",[s._v("application-test.propertise")]),s._v("：测试环境配置文件")]),s._v(" "),t("p",[s._v("激活相应的 profile ，可以在 "),t("code",[s._v("application.properties")]),s._v(" 中添加如下配置：")]),s._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换到开发环境")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("spring.profiles.active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("dev ")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("yml 配置")])]),s._v(" "),t("p",[s._v("yml 配置和 properties 配置完全一样，下面是在 "),t("code",[s._v("application.yml")]),s._v(" 中切换 profile 的配置")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("profiles")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("除此之外，yml 还提供了一种文档块的配置方式，可以省去  "),t("code",[s._v("application-dev.yml")]),s._v("、"),t("code",[s._v("application-test.yml")]),s._v(" 多个配置文件的编写,只需要使用一个 application.yml 即可。")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9999")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("profiles")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("active")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置环境")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发环境")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8888")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("activate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on-profile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试环境")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7777")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spring")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("config")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("activate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on-profile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" test\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);